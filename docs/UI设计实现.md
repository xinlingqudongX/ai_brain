# CIIA 智能作定计 UI 设计说明文档 (V3.0)

## 1. 简介与设计哲学

本 UI 设计用于 **情景智能交互架构 (CIIA)** 控制台，旨在提供一个简洁、高效、可扩展的配置和监控界面。设计哲学是 **“Single Pane of Glass”（单窗格控制）**，将复杂的配置和监控功能整合在一个统一的仪表盘中。

## 2. 核心架构视图

UI 采用 **仪表盘 + 侧边抽屉** 的分层设计。

| 区域名称                      | 对应功能                                  | 技术实现                            |
| :---------------------------- | :---------------------------------------- | :---------------------------------- |
| **主仪表盘 (Main Dashboard)** | 智能体概览、**实时执行监控 (Call Stack)** | HTML Grid, CSS Flowchart Simulation |
| **配置抽屉 (Config Drawer)**  | 统一配置：角色、能力、事件                | 三栏布局 (3 Columns Layout)         |

## 3. 主仪表盘功能 (Main Dashboard) 细节

### 3.1 智能体卡片 (Agent Grid)

* **功能**: 快速查看所有角色的状态和基础信息。
* **交互**: 点击卡片触发 **配置抽屉** 弹出。

### 3.2 实时执行监控 (Execution Call Stack) - 关键新增

* **目的**: 提高系统的 **可观察性 (Observability)**，展示 Agent 决策的“线路走向”。
* **结构**: 采用 **垂直流程图/时间轴** 样式。
* **节点顺序 (Execution Lineage)**:
    1.  上下文初始化 (Context Data Injection)
    2.  LLM 决策引擎调用 (Meta-Prompt Inference)
    3.  **能力调用 (Capability Execution)** - 对应 Capability Library 中的函数。
    4.  结果输出 (Final Action / Notification)
* **状态反馈**: 流程线颜色变化（绿色/成功，红色/失败）。

## 4. 统一配置抽屉功能 (Config Drawer) 细节

抽屉内容被划分为三个逻辑清晰的栏目，映射 **Who $\rightarrow$ What $\rightarrow$ When** 的配置流程。

### 4.1 栏目一：角色设定 (Who)

| 功能点                                    | 描述                                                                                                                              | 设计目的                                                 |
| :---------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------- |
| **人设 Prompt**                           | 核心 System Prompt 文本域。                                                                                                       | 定义 Agent 的基本个性和行为准则。                        |
| **最终 Prompt 预览 (Multi-Role Preview)** | **新增。** 一个只读代码块，展示发送给 LLM 的最终、完整的文本。内容包括：**角色 Prompt** + **已选能力描述** + **实时上下文规则**。 | **解决透明度问题**：让用户理解多重配置如何影响最终指令。 |

### 4.2 栏目二：能力装配 (What) - **重点优化**

* **目的**: 解决潜在的上千项能力列表管理问题，实现 **高可扩展性**。
* **结构**: 采用 **Tab 分类 + 搜索栏** 的设计模式。
    * **Tab 分类**: 垂直分类（如 `核心`, `DevOps`, `生活`, `数据`），便于筛选。
    * **交互**: 用户通过搜索和 Tab 快速定位能力，并通过勾选方式进行授权。

### 4.3 栏目三：监听事件 (When)

* **结构**: 简洁的 **时间轴** 列表。
* **配置内容**: 允许配置 **Cron 定时** (例如 `每天 @ 12:00 PM`) 和 **系统事件** (例如 `Event: user.login`) 两种触发器。

## 5. 技术与视觉规范

| 规范项        | 描述                                                                                             |
| :------------ | :----------------------------------------------------------------------------------------------- |
| **技术栈**    | 前端原型基于 **HTML / Tailwind CSS**。                                                           |
| **配色主题**  | **暗黑模式 (Dark Mode)**。背景 `#111827`，卡片 `#1f2937`。使用蓝色和绿色作为主要状态色和强调色。 |
| **字体/图标** | 采用 `sans-serif` 字体，使用 FontAwesome 图标增强可读性。                                        |
| **交互**      | 使用 **CSS 动画** 实现抽屉的流畅滑入/滑出。                                                      |